<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pet Adoption</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .card-img-top {
      height: 200px;
      object-fit: cover;
    }
    .badge {
      margin-left: 5px;
    }
  </style>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">Pet Adoption</a>
  </nav>

  <div class="row">
      <div class="col-md-4 mb-4">
        <div class="card">
		  <img src="https://www.goldenrescue.com/wp-content/uploads/2023/03/7.jpg" jsaction class="sFlh5c FyHeAf iPVvYb" style="max-width: 350px; height: 350px; margin: 30px 0px; width: 350px;" alt="ADOPTED 3/10/23 Goldie-Female (6 years old) - Golden Retriever Rescue" jsname="kn3ccd" aria-hidden="false">
		<div class="card-body">
            <h5 class="card-title">Bella - Golden Retriever</h5>
            <p>Type: Dog</p>
            <p><span class="badge bg-primary">Age: 3 years</span></p>
            <p><span class="badge bg-primary">Gender: Female </span> Spayed</p>
            <a href="Bella.html?pet=1" class="btn btn-primary">View Details</a>
        </div>
      </div>
	</div>
	
      <div class="col-md-4 mb-4">
        <div class="card">
          <img src="https://d308toqq2zpasi.cloudfront.net/images/pet_listings/cat/c/cb/48/id_15699583/e7d5f6/maine-coon-cat-for-adoption_large.jpeg" jsaction="" class="sFlh5c FyHeAf iPVvYb" style="max-width: 350px; height: 350px; margin: 30px 0px; width: 350px;" alt="Rescue Maine Coon Cats for Adoption near Fort Lauderdale, Florida |  PetCurious" jsname="kn3ccd" aria-hidden="false">         
 		<div class="card-body">
            <h5 class="card-title">Max - Maine Coon</h5>
            <p>Type: Cat</p>
            <p><span class="badge bg-primary"> Age: 4 years</span></p>
            <p><span class="badge bg-primary">Gender: Male</span> Neutered</p>
            <a href="Max.html?pet=2" class="btn btn-primary">View Details</a>
          </div>
        </div>
      </div>

      <!-- Pet Card 3 -->
      <div class="col-md-4 mb-4">
        <div class="card">
			<img src="https://dogwizard.com/wp-content/uploads/2024/08/pexels-irina-zhur-5306735-9862786-1-scaled.jpg" jsaction class="sFlh5c FyHeAf iPVvYb" style="max-width: 350px; height: 350px; margin: 30px 0px; width: 350x;" alt="Exploring The Root Causes Behind Full Animal Shelters - D.O.G. Obedience  Group" jsname="kn3ccd" aria-hidden="false">
        <div class="card-body">
            <h5 class="card-title">Roscoe - German Shepherd/Labrador</h5>
            <p>Type: Dog</p>
            <p><span class="badge bg-primary">Age: 8 years</span></p>
            <p><span class="badge bg-primary">Gender: Male</span> Neutered</p>
            <a href="Roscoe.html?pet=3" class="btn btn-primary">View Details</a>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <!-- Pet Card 4 -->
      <div class="col-md-4 mb-4">
        <div class="card">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRRiATys1PJLKNKDx89oBWWMoimN19x_e3ABQ&s" class="sFlh5c FyHeAf" alt="Tinkerbell is a 5-year-old, gorgeous Siamese cat. She was surrendered to a  local shelter with 3 other cats she lived with. Their previous owner became  sick and could not take care of" jsname="JuXqh" style="max-width: 350px; height: 350px; margin: 30px 0px; width: 350px;" data-ilt="1738631226090">
          <div class="card-body">
            <h5 class="card-title">Sam - Siamese</h5>
            <p>Type: Cat</p>
            <p><span class="badge bg-primary">Age: 1 years</span></p>
            <p><span class="badge bg-primary">Gender: Female</span> Spayed</p>
            <a href="Sam.html?pet=4" class="btn btn-primary">View Details</a>
          </div>
        </div>
      </div>

      <!-- Pet Card 5 -->
      <div class="col-md-4 mb-4">
        <div class="card">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTimInTH6HnJwfqFjvKB8m4N5BdIhmL-VXulg&s" class="sFlh5c FyHeAf" alt="Midland Animal Shelter Adoptables - DA12 - A083351 1 year old female Beagle/Basset  Hound mix Available March 10 MIDLAND TEXAS *WE DO NOT WORK AT THE SHELTER.  PLEASE CONTACT THE SHELTER* Adopt" jsname="JuXqh" style="max-width: 350px; height: 350px; margin: 30px 0px; width: 350px;" data-ilt="1738632243332">
          <div class="card-body">
            <h5 class="card-title">Charlie - Beagle/Basset Hound Mix</h5>
            <p>Type: Dog</p>
            <p><span class="badge bg-primary">Age: 2 years</span></p>
            <p><span class="badge bg-primary">Gender: Male</span> Neutered</p>
            <a href="Charlie.html?pet=5" class="btn btn-primary">View Details</a>
          </div>
        </div>
      </div>

      <!-- Pet Card 6 -->
      <div class="col-md-4 mb-4">
        <div class="card">
          <img src="https://theperrynews.com/wp-content/uploads/2020/01/hulgan-cat.jpg" jsaction class="sFlh5c FyHeAf iPVvYb" style="max-width: 350px; height: 350px; margin: 30px 0px; width: 350px;" alt="House-ready orange tabby seeks permanent placement | ThePerryNews" jsname="kn3ccd" aria-hidden="false">
          <div class="card-body">
            <h5 class="card-title">Tiger - Orange Tabby</h5>
            <p>Type: Cat</p>
            <p><span class="badge bg-primary">Age: 10 years</span></p>
            <p><span class="badge bg-primary">Gender: Male</span> Neutered</p>
            <a href="Tiger.html?pet=6" class="btn btn-primary">View Details</a>
          </div>
        </div>
      </div>

	<!-- Pet Card 7 -->
	<div class="col-md-4 mb-4">
		<div class="card">
			<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTLOL3KKagfr3xGq05sYNxclr3gqC9hlGnK-A&s" class="sFlh5c FyHeAf" alt="Regional Animal Shelter - King William, Virginia - Pending Rescue! Meet  Grits, a 5 year old male Beagle that likes to smile! He came to us as a  stray, so we are" jsname="JuXqh" style="max-width: 350px; height: 350px; margin: 30px 0px; width: 350px;" data-ilt="1739812255518">
			<div class="card-body">
			<h5 class="card-title">Baxter - Beagle</h5>
			<p> Type: Dog</p>
			<p><span class="badge bg-primary">Age: 5 years</span></p>
			<p><span class="badge bg-primary">Gender: Male</span>Neutured</p>
			<a href="Baxter.html?pet=7" class="btn btn-primary">View Details</a>
		</div>
	  </div>
    </div>

	<!-- Pet Card 8 -->
	<div class="col-md-4 mb-4">
		<div class="card">
			<img src="https://geniusvets.s3.amazonaws.com/gv-cat-breeds/Persian-1.jpg" jsaction class="sFlh5c FyHeAf iPVvYb" style="max-width: 350px; height: 350px; margin: 30px 0px; width: 350px;" alt="Learn About The Persian Cat Breed From A Trusted Veterinarian" jsname="kn3ccd" aria-hidden="false">
		<div class="card-body">
			<h5 class="card-title">Whiskers - Persian</h5>
			<p> Type: Cat</p>
			<p><span class="badge bg-primary">Age: 4 Years</span></p>
			<p><span class="badge bg-primary">Gender: Male</span>Neutured</p>
			<a href="Whiskers.html?pet=8" class="btn btn-primary">View Details</a>
		</div>
	  </div>
	</div>

	<!-- Pet Card 9 -->
	<div class="col-md-4 mb-4">
		<div class="card">
			<img src="https://static.wikia.nocookie.net/animals/images/5/53/Image-1462053992.jpeg/revision/latest?cb=20160430220632" jsaction class="sFlh5c FyHeAf iPVvYb" style="max-width: 350px; height: 350px; margin: 30px 0px; width: 350px;" alt="Labrador Retriever | Animal Database | Fandom" jsname="kn3ccd" aria-hidden="false">
		<div class="card-body">
		<h5 class="card-title">Sadie - Labrador Retriever</h5>
		<p> Type: Dog</p>
		<p><span class="badge bg-primary">Age: 3 years</span></p>
		<p><span class="badge bg-primary">Gender: Female </span>Spayed</p>
		<a href="Sadie.html?pet=9" class="btn btn-primary">View Details</a>
    </div>
   </div>
  </div>
 </div>

  
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
  <script>
    const blobId = 'e1ae3136-ca88-462d-8354-52e80ef3dcc8';
    const apiUrl = `http://localhost:3000/api/jsonBlob/${blobId}`;
  
    async function fetchPets() {
      const res = await fetch(apiUrl);
      const data = await res.json();
      return data.pets || [];
    }
  
    async function savePets(pets) {
      await fetch(apiUrl, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ pets })
      });
    }
  
    function renderPetCards(pets) {
      const container = document.querySelector('.row');
      container.innerHTML = ''; // Clear old cards
      pets.forEach((pet, index) => {
        const card = `
          <div class="col-md-4 mb-4">
            <div class="card">
              <img src="${pet.image || 'https://via.placeholder.com/350x200'}" class="card-img-top" alt="${pet.name}">
              <div class="card-body">
                <h5 class="card-title">${pet.name} - ${pet.breed}</h5>
                <p>Type: ${pet.type}</p>
                <p><span class="badge bg-primary">Age: ${pet.age}</span></p>
                <p><span class="badge bg-primary">Gender: ${pet.gender}</span> ${pet.status}</p>
                <button class="btn btn-danger" onclick="deletePet(${index})">Delete</button>
              </div>
            </div>
          </div>`;
        container.insertAdjacentHTML('beforeend', card);
      });
    }
  
    async function deletePet(index) {
      const pets = await fetchPets();
      pets.splice(index, 1);
      await savePets(pets);
      renderPetCards(pets);
    }
  
    window.onload = async () => {
      const pets = await fetchPets();
      renderPetCards(pets);
    };
  </script>
  <!-- Add New Pet Form -->
<div class="container my-4">
  <h3>Add a New Pet</h3>
  <form id="petForm">
    <div class="row">
      <div class="col-md-3">
        <input class="form-control" type="text" placeholder="Name" id="name" required>
      </div>
      <div class="col-md-3">
        <input class="form-control" type="text" placeholder="Breed" id="breed" required>
      </div>
      <div class="col-md-2">
        <input class="form-control" type="text" placeholder="Type" id="type" required>
      </div>
      <div class="col-md-2">
        <input class="form-control" type="number" placeholder="Age" id="age" required>
      </div>
      <div class="col-md-2">
        <select class="form-control" id="gender" required>
          <option disabled selected>Gender</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select>
      </div>
      <div class="col-md-12 mt-2">
        <input class="form-control" type="text" placeholder="Image URL (optional)" id="image">
      </div>
      <div class="col-md-12 mt-2">
        <input class="form-control" type="text" placeholder="Status (Spayed/Neutered)" id="status">
      </div>
      <div class="col-md-12 mt-3">
        <button class="btn btn-success" type="submit">Add Pet</button>
      </div>
    </div>
  </form>
</div>

<script>
  const blobId = 'e1ae3136-ca88-462d-8354-52e80ef3dcc8';
  const apiUrl = `http://localhost:3000/api/jsonBlob/${blobId}`;

  async function fetchPets() {
    const res = await fetch(apiUrl);
    const data = await res.json();
    return data.pets || [];
  }

  async function savePets(pets) {
    await fetch(apiUrl, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ pets })
    });
  }

  function renderPetCards(pets) {
    const container = document.querySelector('.row');
    container.innerHTML = '';
    pets.forEach((pet, index) => {
      const card = `
        <div class="col-md-4 mb-4">
          <div class="card">
            <img src="${pet.image || 'https://via.placeholder.com/350x200'}" class="card-img-top" alt="${pet.name}">
            <div class="card-body">
              <h5 class="card-title">${pet.name} - ${pet.breed}</h5>
              <p>Type: ${pet.type}</p>
              <p><span class="badge bg-primary">Age: ${pet.age}</span></p>
              <p><span class="badge bg-primary">Gender: ${pet.gender}</span> ${pet.status}</p>
              <button class="btn btn-danger" onclick="deletePet(${index})">Delete</button>
            </div>
          </div>
        </div>`;
      container.insertAdjacentHTML('beforeend', card);
    });
  }

  async function deletePet(index) {
    const pets = await fetchPets();
    pets.splice(index, 1);
    await savePets(pets);
    renderPetCards(pets);
  }

  document.getElementById('petForm').addEventListener('submit', async function (e) {
    e.preventDefault();
    const newPet = {
      name: document.getElementById('name').value,
      breed: document.getElementById('breed').value,
      type: document.getElementById('type').value,
      age: parseInt(document.getElementById('age').value),
      gender: document.getElementById('gender').value,
      image: document.getElementById('image').value,
      status: document.getElementById('status').value
    };

    const pets = await fetchPets();
    pets.push(newPet);
    await savePets(pets);
    renderPetCards(pets);
    this.reset();
  });

  window.onload = async () => {
    const pets = await fetchPets();
    renderPetCards(pets);
  };
</script>
</body>

</html>
